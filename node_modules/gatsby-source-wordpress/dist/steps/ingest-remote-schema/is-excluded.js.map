{"version":3,"file":"is-excluded.js","names":["typeIsExcluded","pluginOptions","typeName","type","exclude","fieldIsExcludedOnParentType","field","parentType","allTypeSettings","state","store","getState","typeMap","remoteSchema","fullType","get","findTypeName","parentTypeNodesField","fields","find","name","parentTypeNodesFieldTypeName","excludeFieldNames","includes"],"sources":["../../../src/steps/ingest-remote-schema/is-excluded.js"],"sourcesContent":["import store from \"~/store\"\nimport { findTypeName } from \"~/steps/create-schema-customization/helpers\"\n\nconst typeIsExcluded = ({ pluginOptions, typeName }) =>\n  pluginOptions &&\n  pluginOptions.type[typeName] &&\n  pluginOptions.type[typeName].exclude\n\nconst fieldIsExcludedOnParentType = ({ pluginOptions, field, parentType }) => {\n  const allTypeSettings = pluginOptions.type\n\n  const state = store.getState()\n  const { typeMap } = state.remoteSchema\n\n  const fullType = typeMap.get(findTypeName(parentType))\n\n  const parentTypeNodesField = fullType?.fields?.find(\n    field => field.name === `nodes`\n  )\n\n  const parentTypeNodesFieldTypeName = findTypeName(parentTypeNodesField?.type)\n\n  const fieldIsExcludedOnParentType =\n    // if this field is excluded on either the parent type\n    allTypeSettings[parentType?.name]?.excludeFieldNames?.includes(\n      field?.name\n    ) ||\n    // or the parent type has a \"nodes\" field and that type has this field excluded\n    allTypeSettings[parentTypeNodesFieldTypeName]?.excludeFieldNames?.includes(\n      field?.name\n    )\n\n  return !!fieldIsExcludedOnParentType\n}\n\nexport { typeIsExcluded, fieldIsExcludedOnParentType }\n"],"mappings":";;;;;;;AAAA;;AACA;;AAEA,MAAMA,cAAc,GAAG,CAAC;EAAEC,aAAF;EAAiBC;AAAjB,CAAD,KACrBD,aAAa,IACbA,aAAa,CAACE,IAAd,CAAmBD,QAAnB,CADA,IAEAD,aAAa,CAACE,IAAd,CAAmBD,QAAnB,EAA6BE,OAH/B;;;;AAKA,MAAMC,2BAA2B,GAAG,CAAC;EAAEJ,aAAF;EAAiBK,KAAjB;EAAwBC;AAAxB,CAAD,KAA0C;EAAA;;EAC5E,MAAMC,eAAe,GAAGP,aAAa,CAACE,IAAtC;;EAEA,MAAMM,KAAK,GAAGC,cAAA,CAAMC,QAAN,EAAd;;EACA,MAAM;IAAEC;EAAF,IAAcH,KAAK,CAACI,YAA1B;EAEA,MAAMC,QAAQ,GAAGF,OAAO,CAACG,GAAR,CAAY,IAAAC,qBAAA,EAAaT,UAAb,CAAZ,CAAjB;EAEA,MAAMU,oBAAoB,GAAGH,QAAH,aAAGA,QAAH,2CAAGA,QAAQ,CAAEI,MAAb,qDAAG,iBAAkBC,IAAlB,CAC3Bb,KAAK,IAAIA,KAAK,CAACc,IAAN,KAAgB,OADE,CAA7B;EAIA,MAAMC,4BAA4B,GAAG,IAAAL,qBAAA,EAAaC,oBAAb,aAAaA,oBAAb,uBAAaA,oBAAoB,CAAEd,IAAnC,CAArC;EAEA,MAAME,2BAA2B,GAC/B;EACA,0BAAAG,eAAe,CAACD,UAAD,aAACA,UAAD,uBAACA,UAAU,CAAEa,IAAb,CAAf,0GAAmCE,iBAAnC,kFAAsDC,QAAtD,CACEjB,KADF,aACEA,KADF,uBACEA,KAAK,CAAEc,IADT,QAGA;EAHA,0BAIAZ,eAAe,CAACa,4BAAD,CAJf,qFAIA,uBAA+CC,iBAJ/C,2DAIA,uBAAkEC,QAAlE,CACEjB,KADF,aACEA,KADF,uBACEA,KAAK,CAAEc,IADT,CAJA,CAFF;EAUA,OAAO,CAAC,CAACf,2BAAT;AACD,CAzBD"}